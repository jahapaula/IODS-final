{
    "collab_server" : "",
    "contents" : "# https://druedin.com/2015/07/14/overcoming-warnings-when-importing-spss-files-to-r/\nlibrary(foreign)\nlibrary(dplyr)\n\nss2016 <- read.spss(\"15618_SuomiSyö_2016.sav\", to.data.frame=TRUE, use.value.labels = T)#, reencode = \"macintosh\") piti tehdä jotain mutta eipä toimi\n\n# saving variable names to a diff dataset just to make it easier to check at them\n# encoding doesn't work\ndataset.labels <- as.data.frame(attr(ss2016, \"variable.labels\"), encoding=\"macintosh\")\nstr(dataset.labels)\n\nss2016.sub <- dplyr::select(ss2016, k17.5, k67_12, k67_15, k67_16, suuralue, supu, ika, starts_with(\"k1.\"), starts_with(\"k18a_\"), starts_with(\"k63.\"), starts_with(\"k51.\"))\n#dataset.labels <- dplyr::selectrows(dataset.labels, k17.5, k67_12, k67_15, k67_16, suuralue, supu, ika, starts_with(\"k18a_\"), starts_with(\"k63.\"), starts_with(\"k51.\"))\n\n#transforming ruokavalio questions to binary variables\nss2016.sub <- mutate(ss2016.sub, lihaton = k67_12 == 12, kasvis = k67_15 == 15, vegaani = k67_16 == 16)\nss2016.sub <- dplyr::select(ss2016.sub, -k67_12, -k67_15, -k67_16)\n\nwrite.csv(ss2016.sub, \"ss2016sub.csv\")\n\n#The Jungerian excursion, that is, went elsewhere to remove all ääkköset grrr\nss16 <- read.table(\"ss2016sub-ao.csv\", sep=\",\", header = TRUE, row.names = 1 )\n\n\n#### Generating the subset for PCA ####\n\n# creating a sub dataset with attitude factors plus demo\nss16.atti <- dplyr::select(ss16, suuralue, supu, ika, kasvis, lihaton, vegaani, starts_with(\"k1.\"))\n# dataset with attitude variables only\nss16.att <- dplyr::select(ss16, starts_with(\"k1.\"))\n# dataset with viisi tärkeintä ominaisuutta ruoalla\n# ss16.attr <- dplyr::select(ss16, suuralue, supu, ika, kasvis, lihaton, vegaani, starts_with(\"k18a\"))\n\n# https://www.r-bloggers.com/reorder-factor-levels/\n# ss16.att$k1.1 = factor(ss16.att$k1.1,levels(ss16.att$k1.1)[c(4,2,1,3,5)])\n# reorder all factor levels\nfor(i in c(1:ncol(ss16.att))) {\n  ss16.att[,i] = factor(ss16.att[,i],levels(ss16.att[,i])[c(4,2,1,3,5)]) \n}\n\n# save this version for likert scales\nwrite.csv(ss16.att, \"ss2016likerts.csv\")\n\n# transform all factors to numeric\nfor(i in c(1:ncol(ss16.att))) {\n  ss16.att[,i] <- as.numeric(ss16.att[,i])\n}\n\n# deal with missing values\n# print out a completeness indicator of the data\ncomplete.cases(ss16.att)\n\n# print out the data along with a completeness indicator as the last column\ndata.frame(ss16.att[-1], comp = complete.cases(ss16.att))\n\n# filter out all rows with NA values\nss16.att_ <- filter(ss16.att, complete.cases(ss16.att))\n\n# standardize the variables\nss16.att_std <- scale(ss16.att_)\n\n# save the final, scaled and filtered dataset to a file\nwrite.csv(ss16.att_std, \"ss2016final.csv\")",
    "created" : 1489010630024.000,
    "dirty" : true,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3880094100",
    "id" : "D22ED1E1",
    "lastKnownWriteTime" : 1489010727,
    "last_content_update" : 1489010995458,
    "path" : "~/IODS-project/fineats/ss-wrangling.R",
    "project_path" : "ss-wrangling.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 8,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}